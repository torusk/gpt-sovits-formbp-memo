# GPT-SoVITS プロジェクト進捗・復旧メモ

**最終更新日:** 2026-01-XX  
**目的:** 日本語音声（ポッドキャスト）を、自身の声で英語・中国語に変換する。  
**環境:** macOS (M5 MacBook Pro), Python 3.12.12, UV環境

---

## 1. プロジェクトの現在の状況（全進捗：30％）

### ✅ 完了（準備・前処理・エラー対処）
*   **環境構築:** `uv` による仮想環境構築完了。必要なライブラリ（`librosa`, `soundfile`, `torch` 等）はすべてインストール済み。
*   **音声データ:** `my_voice.wav`（約1分）を準備済み。
*   **ASR（文字起こし）:** 正常終了。出力ファイルは `/output/asr_opt/slice_opt.list` に保存されている。
*   **コード修正:** Mac環境特有のエラー（`RuntimeError: Could not load libtorchcodec`）を回避するため、`2-get-sv.py` のコードを `librosa` 使用版に書き換え済み。

### ⏳ 未完了（待機中）
*   **学習（トレーニング）:** まだ実行していない。
*   **推論（音声生成）:** まだ実行していない。

---

## 2. コード修正箇所（重要バックアップ）

ファイル: `GPT_SoVITS/prepare_datasets/2-get-sv.py`
※ 環境を更新した際は、この修正が消えていないか確認してください。

**1. 一番上へのインポート追加**
```python
import librosa
```

**2. 92行目あたりの読み込み処理修正**
```python
# 【修正前】Macでエラーになるため使用しない
# wav32k, sr0 = torchaudio.load(wav_path)

# 【修正後】librosaを使用して読み込む
wav, sr0 = librosa.load(wav_path, sr=None)
wav32k = torch.from_numpy(wav).unsqueeze(0)
```

---

## 3. 再開時の手順（すぐにやること）

WebUI（ブラウザ）に戻り、以下のボタンを順番にクリックしてください。
※ 「一括処理」ボタンは使用せず、個別に実行します。

1.  **【ステップ1】** タブ0の画面で、**「1Ab - 音声自己教師あり特徴抽出」** のオレンジボタンを押す。
    *   ターミナルに `0%... 100%` と進捗が出るまで待つ（数分）。
2.  **【ステップ2】** **「1Ac - セマンテックトークン抽出」** のオレンジボタンを押す。
    *   終了まで待つ。
3.  **【ステップ3】** **「1B - SoVITSトレーニング」** のボタンを押す。
    *   ここが一番時間がかかります（10〜20分程度）。終了まで放置。
4.  **【ステップ4】** **「1C - GPTトレーニング」** のボタンを押す。
    *   終了まで放置。

**学習が終わったら:**
画面上部のタブ **「1 - GPT-SoVITS-TTS」** に移動し、英語や中国語のテキストを入力して「生成」ボタンを押すと、あなたの声で音声が作れます。

---

## 4. 環境情報ログ（バックアップ）

**OS:** macOS (M5)  
**Python:** 3.12.12  
**Manager:** UV  
**Installed Key Libraries:**
*   `librosa` (0.10.2)
*   `soundfile` (0.13.1)
*   `torch` (2.9.1)
*   `torchaudio` (2.9.1)
*   `torchcodec` (0.9.1) ← これが原因でエラーが出たが、コード修正で回避済み

**Project Root:** `/Users/kazuki/Desktop/GPT-SoVITS`  
**Server Start Command:** `uv run python webui.py`

---

## 5. トラブルシューティングメモ

*   **Q: ボタンを押しても反応がない**
    *   A: ターミナル（`webui.py` が動いているやつ）を見てください。ログが出ていなければ、ブラウザをリロードしてみてください。
*   **Q: `FileNotFoundError` が出る**
    *   A: `output/asr_opt/` フォルダの中身を確認。`slicer_opt.list` があるなら、名前を `slice_opt.list` に変更してください。
*   **Q: `RuntimeError: Could not load libtorchcodec`**
    *   A: `2-get-sv.py` のコード修正が適用されているか確認してください（上記「2. コード修正箇所」参照）。
```

***

## 参考：Macユーザー・日本語ユーザーのための学習リンク集

Mac（Apple Silicon）や日本語環境でのGPT-SoVITSの導入・活用に役立つ情報をまとめました。

### 公式・リポジトリ
*   **[RVC-Boss/GPT-SoVITS (GitHub)](https://github.com/RVC-Boss/GPT-SoVITS)**
    *   これまで使用していたツールの公式リポジトリです。更新情報やIssue（トラブルシューティング）はここで確認できます。

### 動画解説（YouTube）
Windows版の解説が多いですが、**「画面の見方」や「ワークフロー（0番→1番タブの使い方）」はMacでも共通**です。復習時の参考にどうぞ。

*   **【しらたき物産】**
    *   この種のAIツールの解説動画は、視覚的に分かりやすく、操作の流れを掴むのに最適です。
*   **【AIボイス合成】**
    *   GPT-SoVITSの具体的な使い方（モデルの学習から推論まで）をステップごとに解説している動画が参考になります。

### テキスト解説・ブログ
Mac特有のエラー解決や、詳細な設定方法が書かれている記事です。

*   **Qiita / Zenn / Note**
    *   検索ワード: `GPT-SoVITS M1` や `GPT-SoVITS Mac 導入`
    *   多くのユーザーが「M1/M2 Macでのエラー対処」や「FFmpegの設定」について記事を共有しています。今回遭遇した `libtorchcodec` のエラーについても、日本語で詳細な解説がある場合があります。
*   **RVC関連の解説サイト**
    *   「GPT-SoVITS」は「RVC」の技術を拡張したものです。RVCの解説サイトでも、似たようなトラブルシューティングが役立つことがあります。

### コミュニティ
*   **Discord (RVC / AI Voice関連)**
    *   日本語のボイス合成コミュニティのDiscordサーバーでは、リアルタイムで質問ができる場合があります。「GPT-SoVITS Mac」で検索してみてください。

---

また戻られた際は、このメモを確認していただければすぐに作業を再開できます。それでは、お休みください。